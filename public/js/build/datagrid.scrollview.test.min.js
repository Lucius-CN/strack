$.extend($.fn.datagrid.defaults,{rowHeight:50,maxDivHeight:1e7,maxVisibleHeight:15e6,deltaTopHeight:0,groupHeight:28,expanderWidth:30,onBeforeFetch:function(t){},onFetch:function(t,e){}}),$.extend($.fn.datagrid.methods,{fixDetailRowHeight:function(t,o){return t.each(function(){var t=$.data(this,"datagrid").options,e=$.data(this,"datagrid").dc,a=t.finder.getTr(this,o,"body",1).next(),i=t.finder.getTr(this,o,"body",2).next();if(i.is(":visible")){a.css("height",""),i.css("height","");var r=Math.max(a.height(),i.height());a.css("height",r),i.css("height",r)}e.body2.triggerHandler("scroll")})},getExpander:function(t,e){return $.data(t[0],"datagrid").options.finder.getTr(t[0],e).find("span.datagrid-row-expander")},getRowDetail:function(t,e){return $.data(t[0],"datagrid").options.finder.getTr(t[0],e,"body",2).next().find("div.datagrid-row-detail")},expandRow:function(t,o){return t.each(function(){var t=$(this).datagrid("options"),e=($.data(this,"datagrid").dc,$(this).datagrid("getExpander",o));if(e.hasClass("datagrid-row-expand")){e.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse");var a=t.finder.getTr(this,o,"body",1).next(),i=t.finder.getTr(this,o,"body",2).next();if(a.show(),i.show(),$(this).datagrid("fixDetailRowHeight",o),t.onExpandRow){var r=$(this).datagrid("getRows")[o];t.onExpandRow.call(this,o,r)}}})},collapseRow:function(t,d){return t.each(function(){var t=$(this).datagrid("options"),e=$.data(this,"datagrid").dc,a=$(this).datagrid("getExpander",d);if(a.hasClass("datagrid-row-collapse")){a.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand");var i=t.finder.getTr(this,d,"body",1).next(),r=t.finder.getTr(this,d,"body",2).next();if(i.hide(),r.hide(),e.body2.triggerHandler("scroll"),t.onCollapseRow){var o=$(this).datagrid("getRows")[d];t.onCollapseRow.call(this,d,o)}}})}}),$.extend($.fn.datagrid.defaults.finder,{getRow:function(t,e){var a="object"==typeof e?e.attr("datagrid-row-index"):e,i=$.data(t,"datagrid").data,r=$(t).datagrid("options");if("scrollview"===r.view.type){if(a<i.firstRows.length)return i.firstRows[a];a-=r.view.index}return i.rows[a]}});var scrollview=$.extend({},$.fn.datagrid.defaults.view,{type:"scrollview",index:0,r1:[],r2:[],r3:[],rows_group_h:{},setEmptyMsg:"",load_status:!1,rows:[],render:function(t,e,a,i){var r=$.data(t,"datagrid").options,o=this.rows||[];if(o.length&&(!a||r.rownumbers||r.frozenColumns&&r.frozenColumns.length)){var d,s=this.index,n=[],l=[];if("new"===i){for(var g=['<div class="datagrid-btable-top"></div>'],h=0;h<o.length;h++){(d=u((p=o[h])[r.groupField]))?d.rows.push(p):(d={value:p[r.groupField],rows:[p]},n.push(d))}for(h=0;h<n.length;h++)(d=n[h]).startIndex=s,s+=d.rows.length,l=l.concat(d.rows);for(h=0;h<n.length;h++)g.push(this.renderGroup.call(this,t,h,n[h],a,i));g.push('<div class="datagrid-btable-bottom"></div>'),$(e).html(g.join(""))}else{for(h=0;h<o.length;h++){var p;(d=u((p=o[h])[r.groupField]))?d.rows.push(p):(d={value:p[r.groupField],rows:[p]},n.push(d))}for(h=0;h<n.length;h++)(d=n[h]).startIndex=s,s+=d.rows.length,l=l.concat(d.rows);var c="";for(h=0;h<n.length;h++)c+=this.renderGroup.call(this,t,h,n[h],a,i);r.groupActive?(console.log(n),console.log($(e)),console.log(c),$(e).find(".datagrid-btable-bottom").before(c)):$(e).find("table").append(c)}}function u(t){for(var e=0;e<n.length;e++){var a=n[e];if(a.value===t)return a}return null}},renderGroup:function(t,e,a,i,r){var o=$.data(t,"datagrid"),d=o.options,s=$(t).datagrid("getColumnFields",i),n=[],l=[];d.groupActive&&(l.push("<tr>"),(i&&(d.rownumbers||d.frozenColumns.length)||!i&&!d.rownumbers&&!d.frozenColumns.length)&&l.push('<td style="border:0;text-align:center;width:25px"><span class="datagrid-row-expander datagrid-row-collapse icon-uniF077" style="display:inline-block;margin-left: 8px;cursor:pointer">&nbsp;</span></td>'),l.push('<td style="border:0;">'),i?(l.push('<span class="datagrid-group-title frozen_gtitle text-ellipsis">'),d.frozenColumns[0]&&2<=d.frozenColumns[0].length&&l.push(d.groupFormatter.call(t,a.value,a.rows))):(l.push('<span class="datagrid-group-title unfrozen_gtitle text-ellipsis">'),d.frozenColumns[0]&&d.frozenColumns[0].length<2&&l.push(d.groupFormatter.call(t,a.value,a.rows))),l.push("</span>"),l.push("</td>"),l.push("</tr>"),n.push('<div class="datagrid-group" class="grid-r-g-'+this.page+'" group-index='+e+">"),n.push('<table cellspacing="0" cellpadding="0" border="0" style="height:100%"><tbody>'),n.push(l.join("")),n.push("</tbody></table>"),n.push("</div>"));for(var g=a.startIndex,h=[],p=0;p<a.rows.length;p++){var c=d.rowStyler?d.rowStyler.call(t,g,a.rows[p]):"",u="",f="";"string"==typeof c?f=c:c&&(u=c.class||"",f=c.style||"");var w=[];f&&w.push(f);var v='class="datagrid-row '+(g%2&&d.striped?"datagrid-row-alt ":" ")+u+'"',b=0<w.length?'style="'+w.join(";")+'"':"",x=o.rowIdPrefix+"-"+(i?1:2)+"-"+g;h.push('<tr id="'+x+'" datagrid-row-index="'+g+'" '+v+" "+b+">"),h.push(this.renderRow.call(this,t,s,i,g,a.rows[p])),h.push("</tr>"),g++}return n.push('<table class="datagrid-btable grid-r-g-'+this.page+'" cellspacing="0" cellpadding="0" border="0"><tbody>'),n.push(h.join("")),n.push("</tbody></table>"),"new"===r||d.groupActive?n.join(""):'<tbody class="grid-r-g-'+this.page+'">'+h.join("")+"</tbody>"},onBeforeRender:function(r,t){var o=$.data(r,"datagrid"),d=o.options,e=o.dc,s=this;d._emptyMsg=d.emptyMsg,d.emptyMsg="",o.data.firstRows=o.data.rows,o.data.rows=[],this.groups=[],e.body1.add(e.body2).empty(),this.rows=[],this.r1=this.r3=[],this.r2=t,function(){d.rowHeight=$(r).datagrid("getRowHeight");var a=$(r).datagrid("getPager");if(a.each(function(){$(this).pagination("options").onSelectPage=function(t,e){d.pageNumber=t||1,d.pageSize=e,a.pagination("refresh",{pageNumber:t,pageSize:e}),$(r).datagrid("gotoPage",d.pageNumber)}}),o.onLoadSuccess=d.onLoadSuccess,d.onLoadSuccess=function(){},!d.remoteSort){var i=d.onBeforeSortColumn;d.onBeforeSortColumn=function(t,e){if(!1===i.call(this,t,e))return!1;o.data.rows=o.data.firstRows}}e.body2.unbind(".datagrid"),setTimeout(function(){e.body2.unbind(".datagrid").bind("scroll.datagrid",function(t){o.onLoadSuccess&&(d.onLoadSuccess=o.onLoadSuccess,o.onLoadSuccess=void 0,o.originalRows=$.extend(!0,[],o.data.firstRows)),s.scrollTimer&&clearTimeout(s.scrollTimer),s.scrollTimer=setTimeout(function(){s.scrolling.call(s,r)},50)}),e.body2.triggerHandler("scroll.datagrid")},0)}();var a=this;setTimeout(function(){a.bindEvents(r)},0)},onAfterRender:function(a){$.fn.datagrid.defaults.view.onAfterRender.call(this,a);var i=this,r=$.data(a,"datagrid"),t=r.options;r.onResizeColumn||(r.onResizeColumn=t.onResizeColumn),r.onResize||(r.onResize=t.onResize),t.onResizeColumn=function(t,e){i.resizeGroup(a),r.onResizeColumn.call(a,t,e)},t.onResize=function(t,e){i.resizeGroup(a),r.onResize.call($(a).datagrid("getPanel")[0],t,e)},i.resizeGroup(a);var e=$.data(a,"datagrid").dc;e.footer1.add(e.footer2).find("span.datagrid-row-expander").css("visibility","hidden")},renderRow:function(t,e,a,i,r){var o=$.data(t,"datagrid").options,d=[];if(a&&o.rownumbers){var s=i+1;o.pagination&&(s+=(o.pageNumber-1)*o.pageSize),d.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+s+"</div></td>")}for(var n=0;n<e.length;n++){var l=e[n],g=$(t).datagrid("getColumnOption",l);if(g){var h=r[l],p=g.styler&&g.styler(h,r,i)||"",c="",u="";"string"==typeof p?u=p:d&&(c=p.class||"",u=p.style||"");var f=[],w=[];c&&f.push(c),u&&w.push(u),g.cbd&&(f.push(g.cbd),w.push("border-color:#DDD #"+g.bdc)),g.editor&&f.push("item-hover"),g.hidden&&w.push("display:none");var v=0<f.length?'class="'+f.join(" ")+'"':"",b=0<w.length?w.join(";"):"";d.push('<td field="'+l+'" style="'+b+'" '+v+">"),g.editor&&d.push('<a href="javascript:;" class="aign-right icon-hide-min dg-hid-icon"><i class="icon-uniE684"></i></a>'),g.checkbox?b="":g.expander?b="text-align:center;height:16px;":(b=u,g.align&&(b+=";text-align:"+g.align+";"),o.nowrap?o.autoRowHeight&&(b+=";height:auto;"):b+=";white-space:normal;height:auto;"),d.push('<div style="'+b+'" '),g.checkbox?d.push('class="datagrid-cell-check '):d.push('class="datagrid-cell '+g.cellClass),d.push('">'),g.checkbox?d.push('<input type="checkbox" name="'+l+'" value="'+(void 0!==h?h:"")+'">'):g.expander?d.push('<span class="datagrid-row-expander datagrid-row-expand" style="display:inline-block;width:16px;height:16px;cursor:pointer;" />'):g.formatter?d.push(g.formatter(h,r,i)):d.push(h),d.push("</div>"),d.push("</td>")}}return d.join("")},bindEvents:function(i){var t=$.data(i,"datagrid").dc,e=t.body1.add(t.body2),r=($.data(e[0],"events")||$._data(e[0],"events")).click[0].handler;e.unbind("click").bind("click",function(t){var e=$(t.target).closest("span.datagrid-row-expander");if(e.length){var a=e.closest("div.datagrid-group").attr("group-index");e.hasClass("datagrid-row-collapse")?$(i).datagrid("collapseGroup",a):$(i).datagrid("expandGroup",a)}else r(t);t.stopPropagation()}),e.scrollLeft(0).scroll(function(t){$(".datagrid-group").css("width","calc(100% + "+this.scrollLeft+"px)")})},scrolling:function(t){var e=$.data(t,"datagrid"),a=e.options,i=e.dc;if(0===a.finder.getRows(t).length)this.reload.call(this,t),this.getNextRows.call(this,t,1);else{if(!i.body2.is(":visible"))return;var r=i.view2.children("div.datagrid-header").outerHeight(),o=i.body2.children("div.datagrid-btable-top"),d=i.body2.children("div.datagrid-btable-bottom");if(!o.length||!d.length)return;var s=o.position().top+o._outerHeight()-r,n=d.position().top-r;s=Math.floor(s),n=Math.floor(n);var l=this.page;if(1<this.page&&Math.abs(s)<=parseInt(n))console.log("向上滚动");else{if(console.log("向下滚动"),e.data.rows.length+this.index>=e.data.total)return;console.log(),console.log(n),n-350<i.body2.height()&&(l++,this.page=l,this.rows=this.r3,this.r1=this.r2,this.r2=this.r3,this.index+=a.pageSize,this.populate.call(this,t,"more"),console.log("page:"+l),this.getNextRows.call(this,t,l))}}},getNextRows:function(t,e){this.getRows.call(this,t,e+1,function(t){this.r3=t})},reload:function(e){var t=$.data(e,"datagrid"),a=t.options,i=t.dc,r=$(i.body2).scrollTop()+a.deltaTopHeight,o=Math.floor(r/a.rowHeight),d=Math.floor(o/a.pageSize)+1;this.getRows.call(this,e,d,function(t){this.page=d,this.index=(d-1)*a.pageSize,this.rows=t,this.r1=[],this.r2=t,this.r3=[],this.populate.call(this,e,"new"),i.body2.triggerHandler("scroll.datagrid")})},getRows:function(a,i,r){var t=$.data(a,"datagrid"),o=t.options,e=(i-1)*o.pageSize;if(o.emptyMsg=o._emptyMsg,this.setEmptyMsg&&this.setEmptyMsg(a),!(e<0)&&!1!==o.onBeforeFetch.call(a,i)){var d=[];if(t.data.firstRows?d=t.data.firstRows.slice(e,e+o.pageSize):t.data.firstRows=[],!d.length||d.length!==o.pageSize&&e+d.length!==t.data.total){var s=$.extend({},o.queryParams,{page:i,rows:o.pageSize});if(o.sortName&&$.extend(s,{sort:o.sortName,order:o.sortOrder}),!1===o.onBeforeLoad.call(a,s))return;!1===o.loader.call(a,s,function(t){var e=o.loadFilter.call(a,t);o.onFetch.call(a,i,e.rows),e.rows&&e.rows.length?r.call(o.view,e.rows):o.onLoadSuccess.call(a,e)},function(){o.onLoadError.apply(a,arguments)})&&(t.data.firstRows.length||(o.onFetch.call(a,i,t.data.firstRows),o.onLoadSuccess.call(a,t.data)))}else o.onFetch.call(a,i,d),r.call(this,d)}},populate:function(t,e){var a=$.data(t,"datagrid"),i=this.page,r=a.options,o=a.dc,d=r.rowHeight,s=r.maxDivHeight;if(this.rows.length){r.view.render.call(r.view,t,o.body2,!1,e),r.view.render.call(r.view,t,o.body1,!0,e);var n=o.body1.add(o.body2),l=n.children("div.datagrid-btable-top"),g=n.children("div.datagrid-btable-bottom"),h=this.index*d,p=a.data.total*d-this.rows.length*d-h;this.rows_group_h["r_"+i]=function(t,e,a){var i=0,r=0;if(t.differhigh){var o=0;e.body2.find(".grid-r-g-"+a+" .datagrid-row").each(function(t){i=$(this).attr("datagrid-row-index"),o=$(this).height(),r+=o+1,e.body1.find("#datagrid-row-r1-1-"+i).css("height",o)})}else e.body1.find(".datagrid-row").css("height",t.rowheight),e.body2.find(".datagrid-row").css("height",t.rowheight);return r}(r,o,i),console.log(this.rows_group_h),x(g,p),a.data.rows=this.rows;var c=o.body2.scrollTop()+r.deltaTopHeight;if(h>r.maxVisibleHeight?(r.deltaTopHeight=h-r.maxVisibleHeight,x(l,h-r.deltaTopHeight)):r.deltaTopHeight=0,p>r.maxVisibleHeight)x(g,r.maxVisibleHeight);else if(0==p){var u=a.data.total%r.pageSize;u&&x(g,o.body2.height()-u*d)}$(t).datagrid("setSelectionState"),o.body2.scrollTop(c-r.deltaTopHeight),r.pageNumber=this.page;var f=$(t).datagrid("getPager");if(f.length){var w=f.pagination("options"),v=w.displayMsg,b=v.replace(/{from}/,this.index+1);b=b.replace(/{to}/,this.index+this.rows.length),f.pagination("refresh",{pageNumber:this.page,displayMsg:b}),w.displayMsg=v}this.setEmptyMsg&&this.setEmptyMsg(t),r.onLoadSuccess.call(t,{total:a.data.total,rows:this.rows})}function x(t,e){var a=Math.floor(e/s),i=e-s*a;e<0&&(i=0);for(var r=[],o=0;o<a;o++)r.push('<div style="height:'+s+'px"></div>');r.push('<div style="height:'+i+'px"></div>'),$(t).html(r.join(""))}},refreshGroupTitle:function(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.dc,o=this.groups[e];r.body1.add(r.body2).children("div.datagrid-group[group-index="+e+"]").find("span.datagrid-group-title").html(i.groupFormatter.call(t,o.value,o.rows))},resizeGroup:function(t,e){var a,i=$.data(t,"datagrid"),r=i.dc,o=r.header2.find("table").find("tr.datagrid-filter-row").hide(),d=r.body2.children("table.datagrid-btable:first").width();(a=void 0===e?r.body2.children("div.datagrid-group"):r.body2.children("div.datagrid-group[group-index="+e+"]"))._outerWidth(d);var s=i.options;if(s.frozenColumns&&s.frozenColumns.length){var n=r.view1.width()-s.expanderWidth,l="rtl"==r.view1.css("direction").toLowerCase();a.find(".datagrid-group-title").css(l?"right":"left",-n+"px")}o.length&&s.showFilterBar&&o.show()},setGroupIndex:function(t){for(var e=0,a=0;a<this.groups.length;a++){var i=this.groups[a];i.startIndex=e,e+=i.rows.length}},updateRow:function(r,o,t){var d=$.data(r,"datagrid").options,s=($(r).datagrid("getRows"),d.finder.getRow(r,o)),e=i(o);$.extend(s,t);var a=i(o),n=e.c,l=a.s,g="datagrid-row "+(o%2&&d.striped?"datagrid-row-alt ":" ")+a.c;function i(t){var e=d.rowStyler?d.rowStyler.call(r,t,s):"",a="",i="";return"string"==typeof e?i=e:e&&(a=e.class||"",i=e.style||""),{c:a,s:i}}function h(t){var e=$(r).datagrid("getColumnFields",t),a=d.finder.getTr(r,o,"body",t?1:2),i=a.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");a.html(this.renderRow.call(this,r,e,t,o,s)),a.attr("style",l).removeClass(n).addClass(g),i&&a.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}h.call(this,!0),h.call(this,!1),$(r).datagrid("fixRowHeight",o)},insertRow:function(r,t,e){for(var a,i=$.data(r,"datagrid"),o=i.options,d=i.dc,s=null,n=0;n<this.groups.length;n++)if(this.groups[n].value==e[o.groupField]){s=this.groups[n],a=n;break}function l(t,e){var a=e?1:2,i=o.finder.getTr(r,t-1,"body",a);o.finder.getTr(r,t,"body",a).insertAfter(i)}s?(null!=t&&null!=t||(t=i.data.rows.length),t<s.startIndex?t=s.startIndex:t>s.startIndex+s.rows.length&&(t=s.startIndex+s.rows.length),$.fn.datagrid.defaults.view.insertRow.call(this,r,t,e),t>=s.startIndex+s.rows.length&&(l(t,!0),l(t,!1)),s.rows.splice(t-s.startIndex,0,e)):(s={value:e[o.groupField],rows:[e],startIndex:i.data.rows.length},a=this.groups.length,d.body1.append(this.renderGroup.call(this,r,a,s,!0)),d.body2.append(this.renderGroup.call(this,r,a,s,!1)),this.groups.push(s),i.data.rows.push(e)),this.refreshGroupTitle(r,a)},deleteRow:function(t,e){var a=$.data(t,"datagrid"),i=a.options,r=a.dc,o=r.body1.add(r.body2),d=i.finder.getTr(t,e,"body",2).closest("table.datagrid-btable"),s=parseInt(d.prev().attr("group-index"));if($.fn.datagrid.defaults.view.deleteRow.call(this,t,e),1<(l=this.groups[s]).rows.length)l.rows.splice(e-l.startIndex,1),this.refreshGroupTitle(t,s);else{o.children("div.datagrid-group[group-index="+s+"]").remove();for(var n=s+1;n<this.groups.length;n++)o.children("div.datagrid-group[group-index="+n+"]").attr("group-index",n-1);this.groups.splice(s,1)}for(e=0,n=0;n<this.groups.length;n++){var l;(l=this.groups[n]).startIndex=e,e+=l.rows.length}}});$.fn.datagrid.methods.baseUpdateRow=$.fn.datagrid.methods.updateRow,$.fn.datagrid.methods.baseGetRowIndex=$.fn.datagrid.methods.getRowIndex,$.fn.datagrid.methods.baseScrollTo=$.fn.datagrid.methods.scrollTo,$.fn.datagrid.methods.baseGotoPage=$.fn.datagrid.methods.gotoPage,$.fn.datagrid.methods.baseSetSelectionState=$.fn.datagrid.methods.setSelectionState,$.extend($.fn.datagrid.methods,{getRowHeight:function(t){var e=t.datagrid("options");if(!e.rowHeight){var a=$('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"><table><tr class="datagrid-row"><td>cell</td></tr></table></div>').appendTo("body"),i=a.find("tr").outerHeight();a.remove(),e.rowHeight=i}return e.rowHeight},updateRow:function(t,e){return t.each(function(){if($(this).datagrid("options").finder.getRow(this,e.index))$(this).datagrid("baseUpdateRow",e);else{var t=$(this).datagrid("getData").firstRows||[];e.index<t.length&&$.extend(t[e.index],e.row)}})},getRowIndex:function(t,e){var a=t.datagrid("options");if("scrollview"!==a.view.type)return t.datagrid("baseGetRowIndex",e);var i=t.datagrid("getData"),r=0;return 0<=(r="object"==typeof e?$.easyui.indexOfArray(i.firstRows,e):$.easyui.indexOfArray(i.firstRows,a.idField,e))?r:-1===(r=t.datagrid("baseGetRowIndex",e))?-1:r+a.view.index},getRow:function(t,e){return t.datagrid("options").finder.getRow(t[0],e)},gotoPage:function(t,o){return t.each(function(){var e,a,i=this,r=$(i).datagrid("options");"scrollview"===r.view.type?("object"==typeof o?(e=o.page,a=o.callback):e=o,r.view.getRows.call(r.view,i,e,function(t){this.page=e,this.index=(e-1)*r.pageSize,this.rows=t,this.r1=[],this.r2=t,this.r3=[],this.populate.call(this,i,"new"),$(i).data("datagrid").dc.body2.scrollTop(this.index*r.rowHeight-r.deltaTopHeight),a&&a.call(i,e)})):$(i).datagrid("baseGotoPage",o)})},scrollTo:function(t,d){return t.each(function(){var t,e,a=this,i=$(a).datagrid("options");"object"==typeof d?(t=d.index,e=d.callback):t=d;var r=i.view;if("scrollview"===r.type){if(t>=r.index&&t<r.index+r.rows.length)$(a).datagrid("baseScrollTo",t),e&&e.call(a,t);else if(0<=t){var o=Math.floor(t/i.pageSize)+1;$(a).datagrid("gotoPage",{page:o,callback:function(){setTimeout(function(){$(a).datagrid("baseScrollTo",t),e&&e.call(a,t)},0)}})}}else $(a).datagrid("baseScrollTo",t),e&&e.call(a,t)})},setSelectionState:function(t){return t.each(function(){if("scrollview"===$(this).datagrid("options").view.type){$(this).datagrid("baseSetSelectionState");var t=$(this).data("datagrid");if(t.data.firstRows.length!==t.checkedRows.length){var e=t.dc;e.header1.add(e.header2).find("input[type=checkbox]")._propAttr("checked",!1)}}else $(this).datagrid("baseSetSelectionState")})},groups:function(t){return t.datagrid("options").view.groups},expandGroup:function(t,i){return t.each(function(){var t=$(this).datagrid("options"),e=$.data(this,"datagrid").dc.view.find(null!=i?'div.datagrid-group[group-index="'+i+'"]':"div.datagrid-group"),a=e.find("span.datagrid-row-expander");a.hasClass("datagrid-row-expand")&&(a.removeClass("datagrid-row-expand").removeClass(" icon-uniF078").addClass("datagrid-row-collapse").addClass(" icon-uniF077"),e.next("table").show()),t.onExpandGroup&&t.onExpandGroup.call(this,i)})},collapseGroup:function(t,i){return t.each(function(){var t=$(this).datagrid("options"),e=$.data(this,"datagrid").dc.view.find(null!=i?'div.datagrid-group[group-index="'+i+'"]':"div.datagrid-group"),a=e.find("span.datagrid-row-expander");a.hasClass("datagrid-row-collapse")&&(a.removeClass("datagrid-row-collapse").removeClass(" icon-uniF077").addClass("datagrid-row-expand").addClass(" icon-uniF078"),e.next("table").hide()),t.onCollapseGroup&&t.onCollapseGroup.call(this,i)})},scrollToGroup:function(t,d){return t.each(function(){var t=$.data(this,"datagrid").dc,e=t.body2.children('div.datagrid-group[group-index="'+d+'"]');if(e.length){var a=e.outerHeight(),i=t.view2.children("div.datagrid-header")._outerHeight(),r=t.body2.outerHeight(!0)-t.body2.outerHeight(),o=e.position().top-i-r;o<0?t.body2.scrollTop(t.body2.scrollTop()+o):o+a>t.body2.height()-18&&t.body2.scrollTop(t.body2.scrollTop()+o+a-t.body2.height()+18)}})}});