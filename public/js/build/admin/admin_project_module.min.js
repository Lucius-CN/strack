$(function(){obj={project_module_update:function(e){var o=$("#module_list_box").datagrid("getSelections"),t=$("#module_list_box").datagrid("getRows"),a=[];o.forEach(function(e){a.push(e.code)});var d={};t.forEach(function(e){0<=$.inArray(e.code,a)?e.selected="yes":e.selected="no",d[e.code]=e}),$.ajax({type:"POST",url:ProjectModulePHP.updateProjectModuleConfig,data:JSON.stringify(d),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(e){$.messager.progress("close"),200===parseInt(e.status)?(Strack.top_message({bg:"g",msg:e.message}),obj.project_module_reset()):layer.msg(e.message,{icon:7,time:1200,anim:6})}})},project_module_reset:function(){$("#module_list_box").datagrid("reload")}},$("#module_list_box").datagrid({url:ProjectModulePHP.getProjectNavModuleList,idField:"module_id",queryParams:{template_id:0},frozenColumns:[[{field:"module_id",checkbox:!0}]],columns:[[{field:"code",title:"编码",width:140,align:"center"},{field:"name",title:"名称",width:140,align:"center"}]],onLoadSuccess:function(e){$.ajax({type:"POST",url:ProjectModulePHP.getProjectModuleConfig,dataType:"json",success:function(e){for(var o in e)"yes"===e[o].selected&&$("#module_list_box").datagrid("selectRecord",e[o].module_id)}})}})});