$(function(){obj={save_setting:function(){var e=Strack.validate_form("save_setting");if(200===e.status){var t={formula_data:{},fields:{}},i=$("#formula_assignee_field").combobox("getValue"),s=$("#formula_reviewed_by").combobox("getValue"),o=$("#formula_no_start_status").combobox("getValue"),a=$("#formula_reviewed_by_status").combobox("getValue"),l=$("#formula_end_by_status").combobox("getValue"),u=$("#formula_in_progress_status").combobox("getValue"),d=$("#formula_actual_time_consuming").combobox("getValue"),g=$("#estimate_working_hours").combobox("getValue"),n=$("#examine_working_hours").combobox("getValue"),m=$("#settlement_time_consuming").combobox("getValue"),r=$("#grouping_of_persons").combobox("getValue"),_=$("#grouping_of_stage").combobox("getValue"),f=$("#sub_task").combobox("getValue");t.fields.assignee_field=i,t.fields.reviewed_by=s,t.fields.reviewed_by_status=a,t.fields.no_start_status=o,t.fields.end_by_status=l,t.fields.in_progress_status=u,t.fields.actual_time_consuming=d,t.fields.estimate_working_hours=g,t.fields.grouping_of_stage=_,t.fields.examine_working_hours=n,t.fields.sub_task=f,t.fields.settlement_time_consuming=m,e.data.view={},e.data.view.grouping_of_persons=r,e.data.view.grouping_of_stage=_,e.data.formula=t,$.ajax({type:"POST",url:FieldsSettingsPHP.updateFieldSettings,contentType:"application/json",data:JSON.stringify(e.data),dataType:"json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(e){$.messager.progress("close"),200===parseInt(e.status)?Strack.top_message({bg:"g",msg:e.message}):layer.msg(e.message,{icon:7,time:1200,anim:6})}})}}},$.ajax({type:"POST",url:FieldsSettingsPHP.getFieldSettings,dataType:"json",success:function(e){var t="",i="",s="",o="",a="",l="",u="",d="",g="",n="",m="",r="",_="",f="";e.hasOwnProperty("formula")&&(t=e.formula.fields.assignee_field,i=e.formula.fields.reviewed_by,s=e.formula.fields.no_start_status,o=e.formula.fields.reviewed_by_status,l=e.formula.fields.in_progress_status,a=e.formula.fields.end_by_status,u=e.formula.fields.actual_time_consuming,d=e.formula.fields.estimate_working_hours,g=e.formula.fields.examine_working_hours,n=e.formula.fields.grade_time_consuming,m=e.formula.fields.settlement_time_consuming,f=e.formula.fields.sub_task),e.hasOwnProperty("view")&&(r=e.view.grouping_of_persons,_=e.view.grouping_of_stage),$("#formula_reviewed_by").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:i}),$("#formula_reviewed_by_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:o}),$("#formula_no_start_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:s}),$("#formula_in_progress_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:l}),$("#formula_end_by_status").combobox({url:FieldsSettingsPHP.getStatusList,height:30,width:170,valueField:"id",textField:"name",value:a}),$("#grouping_of_persons").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:r}),$("#grouping_of_stage").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:_}),$("#settlement_time_consuming").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:m}),$("#formula_actual_time_consuming").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:u}),$("#estimate_working_hours").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:d}),$("#examine_working_hours").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:g}),$("#sub_task").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:f}),$("#formula_assignee_field").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:t}),$("#formula_grade_time_consuming").combobox({url:FieldsSettingsPHP.getCustomFieldList,height:30,width:170,valueField:"id",textField:"name",value:n})}})});