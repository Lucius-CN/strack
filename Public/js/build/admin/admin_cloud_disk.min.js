$(function(){obj={cloud_disk_update:function(){var t=Strack.validate_form("cloud_disk_setting");if(200===parseInt(t.status)){var e={};for(var i in t.data)if(-1!=i.indexOf("endpoint_")){var a=i.split("-");e.hasOwnProperty(a[0])||(e[a[0]]={}),e[a[0]][a[1]]=t.data[i]}!1===$.isEmptyObject(e)&&$.ajax({type:"POST",url:CloudDiskPHP.updateCloudDiskConfig,data:JSON.stringify({type:t.data.type,open_cloud_disk:t.data.open_cloud_disk,endpoints:e}),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(t){$.messager.progress("close"),200===parseInt(t.status)?Strack.top_message({bg:"g",msg:t.message}):layer.msg(t.message,{icon:7,time:1200,anim:6})}})}},add_endpoint:function(t){$("#cloud_disk_list").append(o(n,{base_url:"",check_url:"",login_name:"",password:""}))},delete_cloud_item:function(t){$(t).closest(".cloud-e-item").remove(),obj.cloud_disk_update()}};var n=$("#rules_submit").val();function o(t,e){var i="",a=Math.floor(1e4*Math.random()+1);for(var n in i+='<div class="cloud-e-item">',"yes"===t&&(i+='<a href="javascript:;" class="e-del-bnt" onclick="obj.delete_cloud_item(this)"><i class="icon-uniE6752"></i></a>'),e)i+=s(a,t,n,e[n],"Cloud_Disk_"+Strack.string_ucwords(n),"Cloud_Disk_Notice_"+Strack.string_ucwords(n));return i+="</div>"}function s(t,e,i,a,n,o){var s="";return'<div class="e-item-input stcol-lg-2">'+(s+="yes"===e?'<input id="endpoint_val_'+i+"_"+t+'" class="form-control form-input" wiget-type="input" wiget-need="yes" wiget-field="endpoint_'+t+"-"+i+'" wiget-name="'+StrackLang[n]+'" autocomplete="off" placeholder="'+StrackLang[o]+'" value="'+a+'">':'<input class="form-control form-input input-disabled" disabled="disabled" placeholder="'+StrackLang[o]+'" value="'+a+'">')+"</div>"}$.ajax({type:"POST",url:CloudDiskPHP.getCloudDiskConfig,dataType:"json",success:function(t){var e=t.open_cloud_disk?t.open_cloud_disk:0;for(var i in Strack.init_open_switch({dom:"#open_cloud_disk",value:e,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100}),t)$.inArray(i,["open_cloud_disk","endpoints"])<0&&$("#set_"+i).val(t[i]);var a=[];if(!1===$.isEmptyObject(t.endpoints))for(var i in t.endpoints)a.push(o(n,t.endpoints[i]));$("#cloud_disk_list").append(a.join(""))}})});